
# Default server configuration
server {
       listen 80 default_server;
       listen [::]:80 default_server;
       
       server_tokens off;
       
       root /usr/share/nginx/html;
       index index.html index.htm;

       server_name _;
       
       location /assets/ {
              alias /usr/share/nginx/html/assets/;
              access_log off;
              expires 7d;
       }

       location ~ .*\.(jpg|png|ico)(.*){
              access_log off;
              expires 14d;
       }

       location ~ .*\.(js|css)(.*){
              access_log off;
              expires 7d;
       }
       
       location / {
             index index.html index.htm;
             try_files $uri $uri.html $uri/ /index.html =404;
      }

       include /etc/nginx/extra-conf.d/*.conf;
       add_header X-Frame-Options "SAMEORIGIN";
       add_header X-Content-Type-Options nosniff;
       add_header X-XSS-Protection "1; mode=block";
       add_header Referrer-Policy "strict-origin";
       add_header Content-Security-Policy "default-src 'self' *.kreditplus.com *.kbfinansia.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://tagmanager.google.com https://www.googletagmanager.com https://www.gstatic.com;script-src-elem 'self' 'unsafe-inline' https://js-agent.newrelic.com https://bam.nr-data.net https://unpkg.com https://cdn.jsdelivr.net *.googletagmanager.com *.fontawesome.com https://www.gstatic.com; style-src 'self' 'unsafe-inline' https://tagmanager.google.com https://googleapis.com;style-src-elem 'self' 'unsafe-inline' https://googleapis.com *.kreditplus.com *.kbfinansia.com https://tagmanager.google.com *.googleapis.com; object-src 'self'; media-src 'self' data:;font-src 'self' *.fontawesome.com https://fonts.gstatic.com *.fontawesome.com data:; img-src 'self' *.kreditplus.com *.kbfinansia.com http://www.w3.org http://www.googletagmanager.com data: blob:; connect-src 'self' https://js-agent.newrelic.com https://bam.nr-data.net https://fonts.gstatic.com *.googleapis.com https://fontawesome.com *.kreditplus.com https://www.google-analytics.com *.googleapis.com  *.fontawesome.com *.kreditplus.com *.kbfinansia.com *.cloudfunctions.net https://unpkg.com blob:";
       add_header Permissions-Policy "geolocation=(self),sync-xhr=(),camera=(self),fullscreen=(self)";
       add_header Strict-Transport-Security 'max-age=31536000; includeSubDomains; preload';

       gzip  on;  
       gzip_min_length 1k;
       gzip_buffers 16 64k;
       gzip_comp_level 5; 
       gzip_types text/plain text/css text/javascript text/xml application/json application/x-javascript application/javascript application/xml application/xml+rss image/jpeg image/gif image/png image/jpg;
       gzip_disable "MSIE [1-6]\.";  
       gzip_vary on;
}
